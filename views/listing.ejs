<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/listing.css">
    <link rel="stylesheet" href="./css/card.css">
    

    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/
    font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Listing</title>
</head>
<body>
    <div class="first-block">
        <% user1.forEach(user => { %>
        <div class="first-block-inner">
            <div class="inner-left">
                <img class="IMG" src="./images/icon2.jpg">
            </div>
        </div>
            <div class="inner-right">
                <h2 class="seller-name"><%= user.username %></h2> 
                <div class="fake-rating">
                    <span>&#x2605;</span>
                    <span>&#x2605;</span>
                    <span>&#x2605;</span>
                    <span>&#x2605;</span>
                    <span>&#x2605;</span>
                </div>
                <div class="seller-input">
                    <h3 class="seller-place">Works for ReEstate</h3>
                    <hr>
                    <span class="seller-info">Information 1:</span>
                    <span class="seller-info-data"><%= user.email %></span> 
                    <br>
                    <br>
                    <span class="seller-info">Information 2:</span>
                    <span class="seller-info-data"><%= user.phone %></span>
                </div>
            </div>
        <% }) %>
    </div>
    
    <div class="second-block">
        <div class="flex-wrapper">
            <div class="single-chart">
                <p class="circle-dis">Total Approved</p>

              <svg viewBox="0 0 36 36" class="circular-chart green">
                <path class="circle-bg"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path class="circle"
                  stroke-dasharray="60, 100"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <text x="18" y="20.35" class="percentage">60%</text>
              </svg>
            </div>
          
            <div class="single-chart">
                <p class="circle-dis">Total Rejected</p>
              <svg viewBox="0 0 36 36" class="circular-chart blue">
                <path class="circle-bg"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path class="circle"
                  stroke-dasharray="40, 100"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <text x="18" y="20.35" class="percentage">40%</text>
              </svg>
            </div>
          </div>
          
    </div>
    <div class="third-block">
        <h2 class="H2">Listings <span id="counter2">(<span id="counter"></span>)</span></h2>
        <div class="container2">
            <div class="list-grid">
                <%if(search.length>0){%>
                    <% search.forEach(estate=> { %>
                    <article class="popular__card">
                    <div class="photo1">
                        <input type="hidden" class="estate-id" value="<%= estate._id %>">
                        <a href="/details?id=<%= estate._id %>"><img src="./images/uploaded/<%= estate.images[0] %>" style="margin-left: 0%;" class="popular__img"></a>
                        <div class="img1text">Click for information</div>
                       
                        <% if(estate.condition=="Rent"){ %>
                        <span class="condition">Rent</span>
                        <%}else{%>
                        <span class="condition">Sale</span>
                        <% }%>
    
                    </div>
                    <div class="popular__data">
                        <h3 class="popular__title">
                            <%=estate.title%>
                        </h3>
                        <h2 class="popular_price" style="
                        font-family: 'Degular';
                        ">
                        <span>EGP <%= (estate.price * 1).toLocaleString() %></span>
                        <span>EGP</span>
                        </h2>
                        <p class="popular__description">
                            <%=estate.location%>
                        </p>
                    </div>
                    <div class="line"></div>
                    <div class="inner-details">
                        <div class="bed-details"><img class="bed" src="./images/bedrooms.png">
                            <div class="number"><%=estate.bedrooms%> Bedrooms</div>
                        </div>
                        <div class="bath-details">
                            <img class="bath" src="./images/bathrooms.png">
                          <div class="number"><%=estate.bathrooms%> Bathrooms</div>
                        </div>
                        <div class="vl"></div>
                        <p id="meter"><%=estate.area%> m<sup>2</sup></p>
                    </div>
                    <div class="line"></div>                    
                </article>
                    <%})%>    
                <% } else { %>
                    <p>There are no Data to display...</p>
                    <% } %>
            </div>
              
              </div>
     </div> 
    <script>
        const counter = document.getElementById("counter");
        const popularCards = document.getElementsByClassName("popular__card");
        counter.innerText = popularCards.length;
    </script>
</body>